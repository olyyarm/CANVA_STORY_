мне нужно чтобы когда я нажимаю кнопку сгенерировать промпт например в сцене 1
нужно просчитать внимательно сценарий от режисера, 
потом посмотреть какие герои там участвуют, посмотреть внимательно подробное описание этих героев из ноды герои  
потом посмотреть подробно описание локации из ноды локации
и потом посмотреть какое должно быть настроение в сцене все настроения для сцен подробно описаны в ноде настроени
далее нужно совместить эти тексы логично так чтобы:

Универсальный мета-промпт для LLM
«Входные данные:
Сценарий, где каждая сцена имеет номер (например, “Сцена 1”), время (например, “0:00–0:05”) и краткое описание событий.
Персонажи: список с именами и подробными описаниями внешности, одежды и при необходимости — ключевых аксессуаров.
Локации: список с названием, архитектурным стилем, визуальными деталями, окружением.
Настроения (moods): список, где каждому настроению дано развернутое описание атмосферы/эмоционального фона.
Твоя задача:
Определить, какие персонажи и локации задействованы в конкретной сцене (по её номеру).
Учесть, какое настроение (mood) относится к этой сцене, и как это должно отражаться во внешнем виде, освещении или общем тоне описания.
Сформировать подробное текстовое описание (либо «master prompt»), предназначенное для генерации визуального материала (изображения, раскадровки и т. п.).
Если в сцене нет персонажей или нет локации, это явно укажи: «В этой сцене персонажи не присутствуют» или «Здесь только общий пейзаж».
Формат вывода:
Укажи название/номер сцены и её таймкод (например, «Сцена 1: 0:00–0:05»).
Опиши, какие персонажи (если есть), включая детали их внешнего вида, позы, выражения лица и т. д.
Опиши локацию (архитектуру, окружение, погодные условия), в зависимости от того, что подходит для этой сцены.
Отрази общее настроение (из списка moods): как оно выражается (цветовая гамма, освещение, эмоциональная атмосфера).
Сформируй единый развёрнутый текст, подходящий для text-to-image генератора, без избыточных деталей (например, внутренняя мотивация персонажей не нужна, если не влияет на визуал).
Пожалуйста, выдай результат в одном блоке текста, чтобы мы могли прямо использовать его в системе генерации (Midjourney, Stable Diffusion и т. п.).
Важно:
Не включай лишней информации, не относящейся к визуальному облику/атмосфере.
Соблюдай логику: если в источниках сказано, что Сцена 1 длится 0:00–0:05, а в ней появляется только Локация А и Персонаж Б, то не нужно добавлять другие локации и героев.
Если в сцене есть упоминание о погодных условиях (туман, облака, дождь), включи это в описание.
Если нет персонажа (например, только панорамный вид), опиши пейзаж и визуальное настроение.
Пример (упрощённый):
«Сцена 1 (0:00–0:05). Локация: Высокая крепость на скале, окружённая туманными облаками. Настроение: таинственно-спокойное, мягкий рассеянный свет. Персонажей нет. Итоговый prompt: “A grand medieval fortress rising out of swirling mist at dawn, soft ambient lighting, mysterious and tranquil mood…”»
Используй такой же подход для всех сцен, объединяя данные из сценария, списка персонажей, локаций и настроений.» 